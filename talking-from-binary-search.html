<!doctype html> <meta charset=utf-8> <title>从二分查找谈起 - Perfect Freeze!</title> <meta name=viewport content="width=device-width,initial-scale=1"> <meta name=description content="前两天在 V2EX 上看到了这篇文章：挖个坑，作为 python 程序员，面试时要求手写二分查找，可以说不么。自己觉得作为一个正常的程序员，多多少少必须会点算法和数据结构，不仅仅要学会怎么用，也要知道是怎么实现的。与此同时《编程珠玑》的作者 Jon Bentley 也提到： 90%以上的程序员无法正确无误的写出二分查找代码。 今天就谈一下和二分有关的一些算法。 二分查找（Binary Search） 问题 二分查找又叫做折半查找。我们所碰到的问题也很简单： 对于一个已经排好序且元素唯一的数组，如何找到我们需要的值value？ 解决思路 想法也很明了：通过不断缩小包含我们要找到的这个值va..."> <meta name=theme-color content=#54C7FC> <link rel=alternate href=/feed.xml type=application/atom+xml> <link rel=apple-touch-icon href=/apple-touch-icon.png> <link rel=manifest href=/manifest.json> <style>*,:after,:before{padding:0;margin:0;box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;text-size-adjust:none;text-rendering:optimizelegibility;image-rendering:optimizequality;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#fff}body{padding:0 24vw;margin:0 auto 0;font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial,sans-serif;font-size:1.6vw;line-height:1.42857143;hanging-punctuation:first allow-end;color:#000;background:#fff;transition:all .2s ease}@media (max-width:1080px){body{padding-left:8vw;padding-right:8vw;font-size:2.24vw}}@media (max-width:640px){body{padding-left:4vw;padding-right:4vw;font-size:3.84vw}}@media (max-width:400px){body{font-size:5.12vw}}a{color:#000;text-decoration:none;transition:color .5s ease,border-color .5s ease,background .5s ease,opacity 1.5s ease}a:focus,a:hover{transition:color .1s ease,border-color .1s ease,background .1s ease,opacity .1s ease;text-decoration:underline;-webkit-text-decoration-skip:ink;text-decoration-skip:ink}hr{border:0}:-ms-input-placeholder{color:#000;opacity:.2}::placeholder{color:#000;opacity:.2}:focus:-ms-input-placeholder{color:#6cb5fc}:focus::placeholder{color:#6cb5fc}.js-system--apple{font-feature-settings:"case","ss01","ss02"}.navigation{padding-top:1.4vmax;padding-bottom:1.4vmax;margin-right:-1vmax;margin-left:-1vmax;font-size:60%;font-weight:700;letter-spacing:.45em;text-transform:uppercase}.navigation li{display:inline-block;line-height:2;list-style:none}.navigation li a{padding:.5em 1vmax}.navigation li a:focus,.navigation li a:hover{color:#6cb5fc;text-decoration:none}.content{margin-bottom:16vmin}.content:after,.content:before{display:table;content:""}.content:after{clear:both}.content .post-content>:first-child{margin-top:0}.content .post-content>:first-child>:first-child{margin-top:0}.content a{font-weight:700}.content a:has(>code){-webkit-text-decoration-color:#54c7fc;text-decoration-color:#54c7fc}.content p{margin-bottom:1.6rem;line-height:1.71428571}.content header{display:flex;min-height:calc(100vh - 5.6vmax - 5ex);padding-top:10vmin;padding-bottom:10vmin;margin-bottom:16vmin;flex-direction:column;justify-content:center;background:rgba(0,0,0,.02);padding-left:24vw;padding-right:24vw;margin-left:-24vw;margin-right:-24vw}@media (max-width:1080px){.content header{min-height:calc(50vh - 1.4vmax * 2 - 3ex);padding-top:16vmin;padding-bottom:16vmin;padding-left:8vw;padding-right:8vw;margin-left:-8vw;margin-right:-8vw}}@media (max-width:640px){.content header{padding-left:4vw;padding-right:4vw;margin-left:-4vw;margin-right:-4vw}}.content header h1{font-size:360%;font-weight:700;letter-spacing:-.04em;margin-left:-2px;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.1}@media (max-width:640px){.content header h1{font-size:280%}}.content header small{display:block;margin-top:2vmin}.content h4,.content h5{margin:10vmin 0 1rem;font-size:72%;font-weight:400;opacity:.5}.content blockquote{position:relative;margin-bottom:2.8rem;margin-left:-1.2vw;font-size:90%}@media (max-width:640px){.content blockquote{margin-left:0}}.content blockquote>p{padding-left:1.2vw;border-left:2px solid;padding-bottom:1.6rem;margin-bottom:0;opacity:.6}.content blockquote>p:last-of-type{padding-bottom:0;margin-bottom:1.6rem}@media (max-width:640px){.content blockquote>p{padding-left:calc(4vw - 2px);padding-right:4vw;margin-left:-4vw;margin-right:-4vw}}.content hr::before{display:block;content:'';width:3px;height:3px;margin:2em auto;border-radius:50%;background:#000;box-shadow:24px 0 0 0 #000,-24px 0 0 0 #000}.content code{font-family:Menlo,Consolas,monospace;color:#54c7fc}.content code{font-size:92%;overflow-wrap:break-word}@media print{*,:after,:before{background:0 0!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}body{padding:10mm!important;margin:0!important}a,a:visited{text-decoration:none}.content header{min-height:0;padding-bottom:0}.content .post-content{max-width:100%!important}.content .post-content a[href]:after{content:" (" attr(href) ")";font-weight:400}blockquote{page-break-inside:avoid}h4,h5,p{orphans:3;widows:3}.navigation{display:none}}.content h4{font-size:84%;opacity:.6}.content h5{font-size:72%;opacity:.5}.navigation{text-align:center}</style> <link rel=canonical href=http://blog.cee.moe/talking-from-binary-search.html> <meta property=og:type content=article> <meta property=og:site_name content="Perfect Freeze!"> <meta property=og:title content=从二分查找谈起> <meta property=og:url content=http://blog.cee.moe/talking-from-binary-search.html> <meta property=og:description content="前两天在 V2EX 上看到了这篇文章：挖个坑，作为 python 程序员，面试时要求手写二分查找，可以说不么。自己觉得作为一个正常的程序员，多多少少必须会点算法和数据结构，不仅仅要学会怎么用，也要知道是怎么实现的。与此同时《编程珠玑》的作者 Jon Bentley 也提到： 90%以上的程序员无法正确无误的写出二分查找代码。 今天就谈一下和二分有关的一些算法。 二分查找（Binary Search） 问题 二分查找又叫做折半查找。我们所碰到的问题也很简单： 对于一个已经排好序且元素唯一的数组，如何找到我们需要的值value？ 解决思路 想法也很明了：通过不断缩小包含我们要找到的这个值va..."> <meta property=og:image content=http://blog.cee.moe/logo.png> <meta name=twitter:card content=summary_large_image> <meta name=twitter:site content=@Ceecirno> <meta name=twitter:creator content=@Ceecirno> <meta property=article:published_time content=2014-10-03T00:00:00-07:00> <meta property=article:modified_time content=2015-08-03T04:59:26-07:00> <meta name=twitter:label1 value=Words> <meta name=twitter:data1 value="183 words"> <meta name=twitter:label2 value="Reading time"> <meta name=twitter:data2 value="Less than 1 min"> <nav class=navigation> <ul> <li> <a href=/ > Home </a> </li> <li> <a href=/articles/ > Articles </a> </li> <li> <a href=/works/ > Works </a> </li> <li> <a href=/friends/ > Friends </a> </li> <li> <a href=/about/ > About </a> </li> </ul> </nav> <main class=content role=main> <article> <header> <h1 title=从二分查找谈起 data-title=从二分查找谈起> 从二分查找谈起<span class="dot dot--post"> </span> </h1> <small> By <span rel=author>Cee</span> on <time datetime=2014-10-03T00:00:00-07:00>Oct 3, 2014</time> </small> </header> <div class=post-content> <p>前两天在 V2EX 上看到了这篇文章：<a href=http://www.v2ex.com/t/142371>挖个坑，作为 python 程序员，面试时要求手写二分查找，可以说不么</a>。自己觉得作为一个正常的程序员，多多少少必须会点算法和数据结构，不仅仅要学会<strong>怎么用</strong>，也要知道是<strong>怎么实现</strong>的。与此同时《编程珠玑》的作者 Jon Bentley 也提到：</p> <blockquote> <p>90%以上的程序员无法正确无误的写出二分查找代码。</p> </blockquote> <p>今天就谈一下和二分有关的一些算法。</p> <hr> <h4 id=二分查找binary-search>二分查找（Binary Search）</h4> <h5 id=问题>问题</h5> <p>二分查找又叫做折半查找。我们所碰到的问题也很简单：</p> <blockquote> <p>对于一个已经排好序且元素唯一的数组，如何找到我们需要的值<code class=highlighter-rouge>value</code>？</p> </blockquote> <h5 id=解决思路>解决思路</h5> <p>想法也很明了：通过不断缩小包含我们要找到的这个值<code class=highlighter-rouge>value</code>的范围，我们就能最终找到它。很明显，一开始的范围是整个数组长度，利用中间项的大小和<code class=highlighter-rouge>value</code>比较我们可以缩小一半的比较范围，以此类推直到我们找到这个<code class=highlighter-rouge>value</code>或者判断这个<code class=highlighter-rouge>value</code>不在数组中。通过每次一半一半的筛选，二分查找的时间复杂度就是O（logn）。</p> <p><strong>（建议大家试着写一下二分查找的代码，看看自己会有什么问题）</strong></p> <p>二分查找代码如下：</p> <script src=https://gist.github.com/Cee/526d4e89d84b3ba22306.js></script> <p>注意到第五行，很多教科书会写 <code class=highlighter-rouge>int mid = (left + right) / 2;</code> 这样的取中间值的语句，但是在 <code class=highlighter-rouge>left</code> 和 <code class=highlighter-rouge>right</code> 都较大的时候会溢出。这个 Bug 在 <code class=highlighter-rouge>java.util.Arrays</code> 包中存在了 8 年，所以也希望大家注意下。取中间值可以写成 <code class=highlighter-rouge>int mid = left + ((right - left) &gt;&gt; 1);</code> 或者 <code class=highlighter-rouge>int mid = right - ((right - left) &gt;&gt; 1);</code>。</p> <p>了解了实现的过程，回头想一下为何可以不断的二分查找呢？原因也很简单：因为数组<strong>已经排好序了</strong>，也就是说这个数组满足<strong>单调性</strong>。这一点很重要，不满足的话也无从下手缩小查找范围的地方了。总之整个数组判断 <code class=highlighter-rouge>f(a[i]) =&lt; value</code> / <code class=highlighter-rouge>f(a[i]) &gt;= value</code> 的状态结果应该是这个样子的：</p> <div class=highlighter-rouge><pre class=highlight><code>NO ... ... NO NO YES YES ... ... YES
</code></pre> </div> <h5 id=应用>应用</h5> <p>二分查找的应用也很广泛，尤其是利用单调性这一点，可以利用他来猜测答案。具体的应用相信很多OJ菊苣都知道，渣渣在这里也就不谈了。</p> <h4 id=快速幂exponentiation-by-squaring>快速幂（Exponentiation by squaring）</h4> <h5 id=问题-1>问题</h5> <p>问题很简单：</p> <blockquote> <p>怎样计算一个数 <code class=highlighter-rouge>N</code> 的 <code class=highlighter-rouge>K</code> 次方？</p> </blockquote> <h5 id=解决思路-1>解决思路</h5> <p>正常的话我们会用一个递归的思路去解决：</p> <script src=https://gist.github.com/cee/42341c228c9a44eb133b.js></script> <p>这个递归算法再简单不过了，算法时间复杂度是 O（n）。但是如果指数非常大的时候，一方面我们无法用 <code class=highlighter-rouge>int</code> 来存储我们的整数了，另一方面计算量实在是太大了。</p> <p>快速幂算法就是为了解决这个问题，算法思路就是利用了二分法。对于奇数和偶数我们分开考虑即可。</p> <script src=https://gist.github.com/cee/3f416d9180707f91f8e2.js></script> <p>(非递归的也很好写，Have a try！）</p> <h5 id=应用-1>应用</h5> <ol> <li>和矩阵运算有关。计算递推数列 <code class=highlighter-rouge>A(n) = C(1)A(n-1) + C(2)A(n-2) + ... + C(k)A(n-k)</code>（其中<code class=highlighter-rouge>C(i)</code>为常数）时，若 n 较大的时候，我们往往把它转换成向量和矩阵的乘法进行操作，对矩阵求 n 次乘法往往会用到快速幂。</li> <li>快速幂取模。在 RSA 加密中我们会用到 <code class=highlighter-rouge>a^b mod c</code>，当 a 和 b 很大的时候，使用 O（logn）的时间计算 <code class=highlighter-rouge>a^b mod c</code> 是非常有必要的，想法类似于快速幂，可自行实现一下。</li> </ol> <hr> <p>这篇文章希望大家能够看完后对<strong>二分思想</strong>有个比较清楚的认识，更希望大家不要写错二分查找哦ԅ(╹﹃╹ԅ)</p> <footer class=post-modified-date> <p> Updated <time datetime=" 2015-08-03T04:59:26+08:00 "> Monday, Aug 03, 2015 </time> </p> </footer> </div> </article> </main> <footer class=footer> <ul> <li><a href=/ >Perfect Freeze!</a></li> <li><a href=https://github.com/Cee title=GitHub>GitHub</a></li> <li><a href=https://github.com/PerfectFreeze title="Perfect Freeze - Lab">Lab</a></li> <li><a href=/feed.xml title="Feed - Atom (The Atom Syndication Format)">Atom</a></li> </ul> <div id=disqus_thread></div> <script type=text/javascript>var disqus_shortname="perfectfreeze",disqus_url="http://blog.cee.moe/talking-from-binary-search.html";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script> <noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> </footer> <script>navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&document.body.classList.add("js-system--apple")</script> <script></script> <script>"serviceWorker"in navigator&&"blog.cee.moe"===window.location.hostname&&navigator.serviceWorker.register("/service-worker.js").then(function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}).catch(function(e){console.log("ServiceWorker registration failed: ",e)})</script> <script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-48656879-8","auto"),ga("send","pageview")</script>