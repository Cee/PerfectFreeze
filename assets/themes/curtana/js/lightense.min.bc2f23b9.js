!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Lightense=b():a.Lightense=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,c){"use strict";var d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(){function a(a){switch(void 0===a?"undefined":e(a)){case"undefined":throw"You need to pass an element!";case"string":return document.querySelectorAll(a);case"object":return a}}function b(a){var b=a.length;if(b)for(var d=0;d<b;d++)c(a[d]);else c(a)}function c(a){a.src&&(a.classList.add("lightense-target"),a.addEventListener("click",function(b){return u.keyboard&&(b.metaKey||b.ctrlKey)?r.open(a.src,"_blank"):void l(this)},!1))}function f(){var a="\n.lightense-backdrop {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  z-index: "+(u.zIndex-1)+";\n  padding: 0;\n  margin: 0;\n  transition: opacity "+u.time+"ms ease;\n  cursor: zoom-out;\n  opacity: 0;\n  background-color: rgba(255, 255, 255, .98);\n  visibility: hidden;\n}\n\n@supports (-webkit-backdrop-filter: blur(30px)) {\n  .lightense-backdrop {\n    background-color: rgba(255, 255, 255, .6);\n    -webkit-backdrop-filter: blur(30px);\n    backdrop-filter: blur(30px);\n  }\n}\n\n.lightense-wrap {\n  position: relative;\n  transition: transform "+u.time+"ms "+u.cubicBezier+";\n  z-index: "+u.zIndex+";\n  pointer-events: none;\n}\n\n.lightense-target {\n  cursor: zoom-in;\n  transition: transform "+u.time+"ms "+u.cubicBezier+";\n  pointer-events: auto;\n}\n\n.lightense-open {\n  cursor: zoom-out;\n}\n\n.lightense-transitioning {\n  pointer-events: none;\n}",b=s.head||s.getElementsByTagName("head")[0],c=s.createElement("style");c.styleSheet?c.styleSheet.cssText=a:c.appendChild(s.createTextNode(a)),b.appendChild(c)}function g(){u.container=s.createElement("div"),u.container.className="lightense-backdrop",s.body.appendChild(u.container)}function h(a){var b=a.width,c=a.height,d=r.pageYOffset||s.documentElement.scrollTop||0,e=r.pageXOffset||s.documentElement.scrollLeft||0,f=u.target.getBoundingClientRect(),g=b/f.width,h=r.innerWidth||s.documentElement.clientWidth||0,i=r.innerHeight||s.documentElement.clientHeight||0,j=h-u.padding,k=i-u.padding,l=b/c,m=j/k;u.scaleFactor=b<j&&c<k?g:l<m?k/c*g:j/b*g;var n=h/2,o=d+i/2,p=f.left+e+f.width/2,q=f.top+d+f.height/2;u.translateX=n-p,u.translateY=o-q}function i(){u.target.classList.add("lightense-open"),u.wrap=s.createElement("div"),u.wrap.className="lightense-wrap",setTimeout(function(){u.target.style.transform="scale("+u.scaleFactor+")"},20),u.target.parentNode.insertBefore(u.wrap,u.target),u.wrap.appendChild(u.target),setTimeout(function(){u.wrap.style.transform="translate3d("+u.translateX+"px, "+u.translateY+"px, 0)"},20),u.background&&(u.container.style.backgroundColor=u.background),u.container.style.visibility="visible",setTimeout(function(){u.container.style.opacity="1"},20)}function j(){n(),u.target.classList.remove("lightense-open"),u.wrap.style.transform="",u.target.style.transform="",u.target.classList.add("lightense-transitioning"),u.container.style.opacity="",setTimeout(function(){u.container.style.visibility="",u.container.style.backgroundColor="",u.wrap.parentNode.replaceChild(u.target,u.wrap),u.target.classList.remove("lightense-transitioning")},u.time)}function k(){Math.abs(u.scrollY-r.scrollY)>=u.offset&&j()}function l(a){if(u.target=a,u.target.classList.contains("lightense-open"))return j();u.scrollY=r.scrollY,u.background=u.target.getAttribute("data-background")||!1,u.padding=u.target.getAttribute("data-padding")||t.padding;var b=new Image;b.onload=function(){h(this),i(),m()},b.src=u.target.src}function m(){r.addEventListener("keyup",o,!1),r.addEventListener("scroll",k,!1),u.container.addEventListener("click",j,!1)}function n(){r.removeEventListener("keyup",o,!1),r.removeEventListener("scroll",k,!1),u.container.removeEventListener("click",j,!1)}function o(a){a.preventDefault(),27===a.keyCode&&j()}function p(c){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};q=a(c),u=d({},t,e),f(),g(),b(q)}var q,r=window,s=document,t={time:300,padding:40,offset:40,keyboard:!0,cubicBezier:"cubic-bezier(.2, 0, .1, 1)",zIndex:2147483647},u={};return p}();a.exports=f}])});